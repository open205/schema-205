Schema:
  Object Type: "Meta"
  References:
    - "ASHRAE205"
  Title: "Air-to-Air Direct Expansion Refrigerant System"
  Description: "Schema for ASHRAE 205 annex RS0004: Air-to-Air Direct Expansion Refrigerant System"
  Version: "2.0.0"
  Root Data Group: "RS0004"

# Data Groups
RS0004:
  Object Type: "Data Group"
  Data Elements:
    metadata:
      Description: "Metadata data group"
      Data Type: "{Metadata}"
      Constraints: "schema=RS0004"
      Required: True
    description:
      Description: "Data group describing product and rating information"
      Data Type: "{Description}"
    performance:
      Description: "Data group containing performance information"
      Data Type: "{Performance}"
      Required: True

Description:
  Object Type: "Data Group"
  Data Elements:
    product_information:
      Description: "Data group describing product information"
      Data Type: "{ProductInformation}"

ProductInformation:
  Object Type: "Data Group"
  Data Elements:
    outdoor_unit_manufacturer:
      Description: "Outdoor unit manufacturer name"
      Data Type: "String"
    outdoor_unit_model_number:
      Description: "Outdoor unit model number"
      Data Type: "Pattern"
      Notes: "Pattern shall match all model numbers that can be represented by the representation"
    indoor_unit_manufacturer:
      Description: "Indoor unit manufacturer name"
      Data Type: "String"
      Notes: "May be omitted for packaged systems with a single manufacturer"
    indoor_unit_model_number:
      Description: "Indoor unit model number"
      Data Type: "Pattern"
      Notes: "Pattern shall match all model numbers that can be represented by the representation"
    refrigerant:
      Description: "Refrigerant used"
      Data Type: "String"
      Notes: "The string shall start with 'R-' and then include the refrigerant number designation conforming to ANSI/ASHRAE Standard 34[@ASHRAE34]"
    compressor_type:
      Description: "Type of compressor"
      Data Type: "<CompressorType>"

Performance:
  Object Type: "Data Group"
  Data Elements:
    performance_capabilities:
      Description: "An array of unique operating modes that indicate the capabilities of the equipment"
      Data Type: "[<PerformanceCapabilities>]"
      # TODO: Constraints: unique https://json-schema.org/understanding-json-schema/reference/array#uniqueItems
      Required: True
    compressor_speed_control_type:
      Description: "Method used to control different speeds of the compressor"
      Data Type: "<SpeedControlType>"
      Required: True
    cooling_cycling_degradation_coefficient:
      Description: "Cooling cycling degradation coefficient (C~D~^c^)"
      Data Type: "Numeric"
      Units: "-"
      Constraints: [">=0.0","<1.0"]
      Required: "if performance_capabilities contains(COOLING)"
      Notes: ["Used for the lowest stage when the unit cycles to meet load"]
    heating_cycling_degradation_coefficient:
      Description: "Heating cycling degradation coefficient (C~D~^h^)"
      Data Type: "Numeric"
      Units: "-"
      Constraints: [">=0.0","<1.0"]
      Required: "if performance_capabilities contains(HEATING)"
      Notes: ["Used for the lowest stage when the unit cycles to meet load"]
    scaling:
      Description: "Specifies the range the performance data can be scaled to represent different capacity equipment"
      Data Type: "{Scaling}"
      Notes: "If not present, scaling of the performance data is not allowed"
    performance_map_cooling:
      Description: "Data group describing cooling performance over a range of conditions"
      Data Type: "{PerformanceMapCooling}"
      Required: "if performance_capabilities contains(COOLING)"
    performance_map_heating:
      Description: "Data group describing heating performance over a range of conditions"
      Data Type: "{PerformanceMapHeating}"
      Required: "if performance_capabilities contains(HEATING)"
    performance_map_standby:
      Description: "Data group describing standby performance"
      Data Type: "{PerformanceMapStandby}"
      Required: True

PerformanceMapCooling:
  Object Type: "Performance Map"
  Data Elements:
    grid_variables:
      Description: "Data group defining the grid variables for cooling performance"
      Data Type: "{GridVariablesCooling}"
      Required: True
    lookup_variables:
      Description: "Data group defining the lookup variables for cooling performance"
      Data Type: "{LookupVariablesCooling}"
      Required: True

GridVariablesCooling:
  Object Type: "Grid Variables"
  Data Elements:
    outdoor_coil_entering_dry_bulb_temperature:
      Description: "Dry bulb temperature of the air entering the outdoor coil"
      Data Type: "[Numeric][1..]"
      Constraints: ">=0.0"
      Units: "K"
      Required: True
    indoor_coil_entering_relative_humidity:
      Description: "Relative humidity of the air entering the indoor coil"
      Data Type: "[Numeric][1..]"
      Constraints: [">=0.0","<=1.0"]
      Units: "-"
      Notes: "As measured immediately before entering the coil (i.e., after the fan in a blow-through configuration)"
      Required: True
    indoor_coil_entering_dry_bulb_temperature:
      Description: "Dry bulb temperature of the air entering the indoor coil"
      Data Type: "[Numeric][1..]"
      Constraints: ">=0.0"
      Units: "K"
      Required: True
      Notes: "As measured immediately before entering the coil (i.e., after the fan in a blow-through configuration)"
    indoor_coil_air_mass_flow_rate:
      Description: "Mass flow rate of air entering the indoor coil"
      Data Type: "[Numeric][1..]"
      Constraints: ">=0.0"
      Units: "kg/s"
      Required: True
      Scalable: True
    compressor_sequence_number:
      Description: "Index indicating the relative capacity order of the compressor speed/stage expressed in order from lowest capacity (starting at 1) to highest capacity"
      Data Type: "[Integer][1..]"
      Constraints: ">=1"
      Units: "-"
      Notes: ["If `compressor_speed_control_type` is `DISCRETE`, sequence numbers shall be provided for each discrete stage of the compressor(s)",
              "If `compressor_speed_control_type` is `CONTINUOUS`, sufficient sequence numbers shall be provided to capture the continuous operation of the compressor(s)"]
      Required: True
    ambient_absolute_air_pressure:
      Description: "Ambient absolute air pressure"
      Data Type: "[Numeric][1..]"
      Constraints: ">=0.0"
      Units: "Pa"
      Required: True

LookupVariablesCooling:
  Object Type: "Lookup Variables"
  Data Elements:
    gross_total_capacity:
      Description: "Total heat removed by the indoor coil"
      Data Type: "[Numeric][1..]"
      Constraints: ">=0.0"
      Units: "W"
      Required: True
      Scalable: True
      Notes: "Shall not include fan heat"
    gross_sensible_capacity:
      Description: "Sensible heat removed by the indoor coil"
      Data Type: "[Numeric][1..]"
      Constraints: ">=0.0"
      Units: "W"
      Required: True
      Scalable: True
      Notes: "Shall not include fan heat"
    gross_power:
      Description: "Gross power draw (of the outdoor unit)"
      Data Type: "[Numeric][1..]"
      Constraints: ">=0.0"
      Units: "W"
      Required: True
      Scalable: True
      Notes: ["Includes compressor, outdoor fan, and any auxiliary power used by the unit's controls and any sump heater",
              "Shall not include power drawn by the indoor fan"]
    operation_state:
      Description: "The operation state at the operating conditions"
      Data Type: "[<OperationState>]"
      Units: "-"
      Required: True

PerformanceMapHeating:
  Object Type: "Performance Map"
  Data Elements:
    grid_variables:
      Description: "Data group defining the grid variables for heating performance"
      Data Type: "{GridVariablesHeating}"
      Required: True
    lookup_variables:
      Description: "Data group defining the lookup variables for heating performance"
      Data Type: "{LookupVariablesHeating}"
      Required: True

GridVariablesHeating:
  Object Type: "Grid Variables"
  Data Elements:
    outdoor_coil_entering_dry_bulb_temperature:
      Description: "Dry bulb temperature of the air entering the outdoor coil"
      Data Type: "[Numeric][1..]"
      Constraints: ">=0"
      Units: "K"
      Required: True
    outdoor_coil_entering_relative_humidity:
      Description: "Relative humidity of the air entering the outdoor coil"
      Data Type: "[Numeric][1..]"
      Constraints: [">=0","<=1.0"]
      Units: "-"
      Required: True
    indoor_coil_entering_dry_bulb_temperature:
      Description: "Dry bulb temperature of the air entering the indoor coil"
      Data Type: "[Numeric][1..]"
      Constraints: ">=0"
      Units: "K"
      Required: True
      Notes: "As measured immediately before entering the coil (i.e., after the fan in a blow-through configuration)"
    indoor_coil_air_mass_flow_rate:
      Description: "Mass flow rate of air entering the indoor coil"
      Data Type: "[Numeric][1..]"
      Constraints: ">=0"
      Units: "kg/s"
      Required: True
      Scalable: True
    compressor_sequence_number:
      Description: "Index indicating the relative order of the compressor speed/stage"
      Data Type: "[Numeric][1..]"
      Constraints: ">=0"
      Units: "-"
      Notes: "Expressed in order from initial stage/speed to final stage/speed"
      Required: True

LookupVariablesHeating:
  Object Type: "Lookup Variables"
  Data Elements:
    gross_steady_state_capacity:
      Description: "Total heat added by the indoor coil under steady-state conditions (i.e., does not include the impact of frost accumulation or defrost operation)"
      Data Type: "[Numeric][1..]"
      Constraints: ">=0"
      Units: "W"
      Required: True
      Scalable: True
      Notes:
        - "Sometimes also referred to as \"instantaneous\" capacity"
        - "Does not account for heat added by the fan"
    gross_integrated_capacity:
      Description: "Total heat added by the indoor coil integrated over the time between defrost terminations"
      Data Type: "[Numeric][1..]"
      Constraints: ">=0"
      Units: "W"
      Required: True
      Scalable: True
      Notes:
        - "Sometimes referred to as \"frost accumulation\" capacity"
        - "Does not account for heat added by the fan"
    gross_steady_state_power:
      Description: "Gross power draw of the outdoor unit under steady-state conditions (i.e., does not include the impact of frost accumulation or defrost operation)"
      Data Type: "[Numeric][1..]"
      Constraints: ">=0"
      Units: "W"
      Required: True
      Scalable: True
      Notes:
        - "Sometimes also referred to as \"instantaneous\" power"
        - "Does not include power drawn by the indoor fan"
        - "Includes compressor, outdoor fan, and any auxiliary power used by the unit's controls and any sump heater"
    gross_integrated_power:
      Description: "Gross power draw of the outdoor unit integrated over the time between defrost terminations"
      Data Type: "[Numeric][1..]"
      Constraints: ">=0"
      Units: "W"
      Required: True
      Scalable: True
      Notes:
        - "Sometimes referred to as \"frost accumulation\" power"
        - "Does not include power drawn by the indoor fan"
        - "Includes compressor, outdoor fan, and any auxiliary power used by the unit's defrost process, controls, and any sump heater"
    defrost_cycle_frequency:
      Description: "Frequency of defrost terminations under the current operating conditions"
      Data Type: "[Numeric][1..]"
      Units: "Hz"
      Required: True
      Notes: "This is the inverse of the duration between defrost terminations, a value of zero implies defrost is not occurring"
    defrost_time_fraction:
      Description: "Fraction of time between defrost terminations that the defrost process is engaged"
      Data Type: "[Numeric][1..]"
      Constraints: [">=0","<=1.0"]
      Units: "-"
      Required: True

PerformanceMapStandby:
  Object Type: "Performance Map"
  Data Elements:
    grid_variables:
      Description: "Data group defining the grid variables for standby performance"
      Data Type: "{GridVariablesStandby}"
      Required: True
    lookup_variables:
      Description: "Data group defining the lookup variables for standby performance"
      Data Type: "{LookupVariablesStandby}"
      Required: True

GridVariablesStandby:
  Object Type: "Grid Variables"
  Data Elements:
    outdoor_coil_environment_dry_bulb_temperature:
      Description: "Dry bulb temperature of the air in the environment of the outdoor coil"
      Data Type: "[Numeric][1..]"
      Constraints: ">=0.0"
      Units: "K"
      Required: True

LookupVariablesStandby:
  Object Type: "Lookup Variables"
  Data Elements:
    gross_power:
      Description: "Gross power draw (of the outdoor unit)"
      Data Type: "[Numeric][1..]"
      Constraints: ">=0.0"
      Units: "W"
      Required: True
      Scalable: True
      Notes: "Includes any auxiliary power used by the unit's controls and any sump heater"
